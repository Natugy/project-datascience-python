# Configuration des Modèles XGBoost
# Utilisé pour centraliser les hyperparamètres

wandb:
  project: "ift6758-milestone2"
  entity: "IFT6758-2025-A04"
  api_key: "13a4f31490980ca10265e2cbf4d46f26ba7a9a7b"

data:
  train_path: "data/processed/train_data.csv"
  val_path: "data/processed/val_data.csv"
  test_path: "data/processed/test_data.csv"
  
  target_column: "is_goal"
  
  exclude_columns:
    - "season"
    - "teamAbbr"
    - "idGame"
    - "prev_event"
    - "prev_team"

models:
  xgboost_baseline:
    name: "XGBoost Baseline"
    features:
      - "distance_net"
      - "angle_net"
    params:
      random_state: 42
      # Paramètres par défaut de XGBoost
  
  xgboost_tuned:
    name: "XGBoost Tuned"
    features: "all"  # Utilise toutes les features disponibles
    
    params:
      max_depth: 5
      learning_rate: 0.05
      n_estimators: 200
      min_child_weight: 3
      subsample: 0.9
      colsample_bytree: 0.9
      scale_pos_weight: 9.6  # Gestion déséquilibre (ratio non-buts/buts)
      random_state: 42
      
    tuning:
      method: "random"  # ou "grid"
      cv: 5
      n_iter: 50
      scoring: "roc_auc"
      
      param_grid:
        max_depth: [3, 5, 7]
        learning_rate: [0.01, 0.05, 0.1]
        n_estimators: [100, 200, 300]
        min_child_weight: [1, 3, 5]
        subsample: [0.8, 0.9, 1.0]
        colsample_bytree: [0.8, 0.9, 1.0]
        scale_pos_weight: [1, 9.6, 4.8]
  
  xgboost_feature_selected:
    name: "XGBoost Feature Selection"
    selection_method: "importance"  # ou "shap"
    n_features_to_select: 10
    importance_threshold: 0.01
    
    # Hérite des params du modèle tuned
    inherit_from: "xgboost_tuned"

evaluation:
  metrics:
    - "roc_auc"
    - "accuracy"
    - "precision"
    - "recall"
    - "f1_score"
  
  plots:
    - "roc_curve"
    - "goal_rate_percentile"
    - "cumulative_goals"
    - "calibration_curve"
    - "feature_importance"
    - "confusion_matrix"
  
  output_dir: "figures/milestone2"

threshold_optimization:
  enabled: true
  method: "f1_score"  # Maximise F1
  range: [0.05, 0.5]
  step: 0.01
